<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doorbin Waste - Contract Acceptance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-green: #2E8B57;
            --lime-green: #ADFF2F;
            --bg-dark: #121212;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
        }
        .accent-lime { color: var(--lime-green); }
        .bg-accent-lime { background-color: var(--lime-green); }
        .primary-green { color: var(--dark-green); }
        .bg-primary-green { background-color: var(--dark-green); }

        .hidden { display: none; }
        
        /* Custom scrollbar for Page 2 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--dark-green);
            border-radius: 4px;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">

    <div class="max-w-3xl mx-auto">
        <!-- PAGE 1: SERVICE OVERVIEW & ACCEPTANCE -->
        <div id="page-1" class="fade-in">
            <header class="flex flex-col items-center mb-12 text-center">
                <img 
                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABpvgoNAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwTEBAAAAgiD7p/ngwgoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPCdwAGK1AABU6X45AAAAABJRU5ErkJggg==" 
                    alt="Doorbin Waste Logo" 
                    class="w-24 h-24 object-contain mb-4"
                />
                <h1 class="text-3xl font-bold mb-1">Service Acceptance Protocol</h1>
                <p class="text-gray-400 font-medium">Doorbin Waste Professional Management Agreement</p>
            </header>

            <section class="mb-10 text-gray-300 leading-relaxed text-lg space-y-6">
                <p>
                    This Professional Service Agreement governs the door-to-door waste collection and management services provided by Doorbin Waste LLC. Our specialized Valet Trash solution is meticulously designed to enhance multi-family residential properties and condominiums through reliable, sustainable, and professional waste removal protocols.
                </p>
                <p>
                    By proceeding, you acknowledge that our team possesses the technical capacity, industry experience, and necessary resources to manage on-site waste safely and efficiently. This agreement outlines the mutual obligations, service schedules, and performance standards required to maintain optimal environmental conditions for your residents.
                </p>
                <p>
                    Please review the specific details regarding property units, frequency, and pricing in the full 
                    <button id="link-to-terms" class="accent-lime font-bold hover:underline bg-transparent border-none p-0 cursor-pointer">Terms of Service</button> 
                    before final submission.
                </p>
            </section>

            <form id="acceptance-form" method="POST" action="https://pagos.app.n8n.cloud/webhook/clickwrap/accept">
                <!-- Hidden fields - values extracted from URL -->
                <input type="hidden" name="client" id="hid-client">
                <input type="hidden" name="property" id="hid-property">
                <input type="hidden" name="units" id="hid-units">
                <input type="hidden" name="service_frequency" id="hid-frequency">
                <input type="hidden" name="start_date" id="hid-start-date">
                <input type="hidden" name="monthly_rate" id="hid-rate">

                <div class="space-y-4 mb-10 border-t border-gray-800 pt-10">
                    <label class="flex items-start space-x-3 cursor-pointer group">
                        <input type="checkbox" id="check-1" required class="mt-1 w-5 h-5 rounded border-gray-700 bg-gray-800 text-[#2E8B57] focus:ring-[#ADFF2F] transition-all cursor-pointer">
                        <span class="text-sm text-gray-400 group-hover:text-white transition-colors">I have read and agree to the Doorbin Waste Master Service Agreement.</span>
                    </label>
                    <label class="flex items-start space-x-3 cursor-pointer group">
                        <input type="checkbox" id="check-2" required class="mt-1 w-5 h-5 rounded border-gray-700 bg-gray-800 text-[#2E8B57] focus:ring-[#ADFF2F] transition-all cursor-pointer">
                        <span class="text-sm text-gray-400 group-hover:text-white transition-colors">I confirm that I have authority to bind the client to these terms.</span>
                    </label>
                </div>

                <div class="text-center">
                    <button type="submit" id="submit-btn" disabled class="w-full py-4 px-6 rounded-lg text-lg font-bold transition-all bg-gray-800 text-gray-600 cursor-not-allowed">
                        ACCEPT & CONTINUE
                    </button>
                    <p id="error-msg" class="text-xs text-red-500 mt-4 font-medium">You must check both boxes to continue.</p>
                </div>
            </form>
        </div>

        <!-- PAGE 2: FULL TERMS VIEW (English version of provided PDF) -->
        <div id="page-2" class="hidden fade-in">
            <header class="flex justify-between items-center mb-10 pb-6 border-b border-gray-800">
                <div class="flex items-center space-x-4">
                    <img 
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABpvgoNAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwTEBAAAAgiD7p/ngwgoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPCdwAGK1AABU6X45AAAAABJRU5ErkJggg==" 
                        alt="Logo" 
                        class="w-12 h-12 object-contain"
                    />
                    <h2 class="text-xl font-bold">Detailed Terms of Service</h2>
                </div>
                <button id="back-to-1" class="accent-lime text-sm font-bold hover:underline flex items-center">
                    <span class="mr-1">←</span> Back to Overview
                </button>
            </header>

            <div id="terms-content" class="bg-[#1a1a1a] p-8 rounded-xl h-[60vh] overflow-y-auto custom-scrollbar text-sm text-gray-300 space-y-6 leading-relaxed shadow-inner">
                <!-- Content generated by JS based on OCR and URL params -->
            </div>
        </div>

        <footer class="mt-16 text-center text-gray-600 text-xs">
            <p>© <span id="year"></span> Doorbin Waste Services LLC. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Data Store
        const contractData = {
            client: 'Pending',
            property: 'Pending',
            units: 'Pending',
            service_frequency: 'Pending',
            start_date: 'Pending',
            monthly_rate: 'Pending'
        };

        // UI State
        const ui = {
            page1: document.getElementById('page-1'),
            page2: document.getElementById('page-2'),
            check1: document.getElementById('check-1'),
            check2: document.getElementById('check-2'),
            submitBtn: document.getElementById('submit-btn'),
            errorMsg: document.getElementById('error-msg'),
            termsContent: document.getElementById('terms-content')
        };

        // Formatter utilities
        const formatDisplayDate = (str) => {
            if (!str || str === 'Pending') return 'Pending';
            const parts = str.split('-');
            if (parts.length === 3) return `${parts[1]}/${parts[2]}/${parts[0]}`;
            return str;
        };

        const formatDisplayCurrency = (val) => {
            if (!val || val === 'Pending') return 'Pending';
            const numeric = parseFloat(val.replace(/[^0-9.]/g, ''));
            if (isNaN(numeric)) return val;
            return '$' + numeric.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        };

        // Initialize App
        function init() {
            document.getElementById('year').textContent = new Date().getFullYear();

            // 1. Read URL Parameters
            const params = new URLSearchParams(window.location.search);
            const keys = ['client', 'property', 'units', 'service_frequency', 'start_date', 'monthly_rate'];
            keys.forEach(key => {
                const val = params.get(key);
                if (val) contractData[key] = val;
            });

            // 2. Populate Form Hidden Fields
            Object.keys(contractData).forEach(key => {
                const el = document.getElementById('hid-' + key.replace('_', '-'));
                if (el) el.value = contractData[key];
            });

            // 3. Set Up Terms Content (Refined English version of the provided Spanish contract)
            generateTerms();

            // 4. Event Listeners
            ui.check1.addEventListener('change', validateForm);
            ui.check2.addEventListener('change', validateForm);
            document.getElementById('link-to-terms').addEventListener('click', () => switchPage(2));
            document.getElementById('back-to-1').addEventListener('click', () => switchPage(1));
        }

        function validateForm() {
            const isValid = ui.check1.checked && ui.check2.checked;
            ui.submitBtn.disabled = !isValid;
            
            if (isValid) {
                ui.submitBtn.classList.remove('bg-gray-800', 'text-gray-600', 'cursor-not-allowed');
                ui.submitBtn.classList.add('bg-accent-lime', 'text-[#121212]', 'hover:brightness-110');
                ui.errorMsg.classList.add('hidden');
            } else {
                ui.submitBtn.classList.add('bg-gray-800', 'text-gray-600', 'cursor-not-allowed');
                ui.submitBtn.classList.remove('bg-accent-lime', 'text-[#121212]', 'hover:brightness-110');
                ui.errorMsg.classList.remove('hidden');
            }
        }

        function switchPage(pageNumber) {
            if (pageNumber === 1) {
                ui.page1.classList.remove('hidden');
                ui.page2.classList.add('hidden');
                window.scrollTo(0,0);
            } else {
                ui.page1.classList.add('hidden');
                ui.page2.classList.remove('hidden');
                window.scrollTo(0,0);
            }
        }

        function generateTerms() {
            const termsTemplate = `
                <div class="space-y-6">
                    <h2 class="text-white font-bold text-xl uppercase tracking-tight text-center border-b border-gray-800 pb-4">DOOR-TO-DOOR WASTE COLLECTION SERVICE AGREEMENT</h2>
                    
                    <p><strong>BETWEEN:</strong></p>
                    <p><strong>Doorbin Waste LLC</strong>, a limited liability company organized and registered under the laws of the State of Florida, with its business address at [Address], hereinafter referred to as the <strong>"SERVICE PROVIDER"</strong>, specialized in door-to-door waste collection, recycling, and waste management in multi-family residential properties and condominiums.</p>
                    
                    <p><strong>AND:</strong></p>
                    <p><strong>${contractData.client}</strong>, a property/condominium association duly organized and registered under the laws of the State of [State], with address at <strong>${contractData.property}</strong>, hereinafter referred to as the <strong>"CLIENT"</strong>.</p>

                    <h3 class="text-white font-bold text-lg border-b border-gray-800 pb-2">DECLARATIONS</h3>
                    <ol class="list-decimal pl-5 space-y-2">
                        <li>The <strong>SERVICE PROVIDER</strong> possesses the capacity, experience, and technical/legal resources to provide Valet Trash services, including the safe and proper handling of all waste generated on the property.</li>
                        <li>The <strong>CLIENT</strong> manages the property and has the authority to contract and supervise the services to be provided to residents.</li>
                    </ol>

                    <h3 class="text-white font-bold text-lg border-b border-gray-800 pb-2">CLAUSES</h3>
                    
                    <p><strong>FIRST – SCOPE OF THE CONTRACT:</strong> The SERVICE PROVIDER shall provide door-to-door waste collection services to all units and common areas of the property located at <strong>${contractData.property}</strong> comprising <strong>${contractData.units}</strong> units, in accordance with the schedule, routes, and frequency agreed upon.</p>

                    <p><strong>SECOND – DURATION:</strong> This contract shall have an initial duration of [Term] months/years, commencing on <strong>${formatDisplayDate(contractData.start_date)}</strong>. It shall automatically renew for equal periods unless written notice of non-renewal is provided at least [Notice Period] days in advance.</p>

                    <p><strong>THIRD – FREQUENCY AND SCHEDULE:</strong> Waste collection will occur at a frequency of <strong>${contractData.service_frequency}</strong>. Collection hours are set between [Start Time] and [End Time]. Holidays will be compensated according to a pre-communicated schedule.</p>

                    <p><strong>FOURTH – OBLIGATIONS OF THE SERVICE PROVIDER:</strong>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>Collect waste from all units and common areas according to the agreed schedule.</li>
                            <li>Provide necessary containers and equipment.</li>
                            <li>Maintain vehicles and equipment in optimal condition, complying with safety and environmental regulations.</li>
                            <li>Provide monthly reports or upon request via the Service App (including photos of daily service).</li>
                        </ul>
                    </p>

                    <p><strong>FIFTH – OBLIGATIONS OF THE CLIENT:</strong>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>Facilitate access to units and common areas for collection.</li>
                            <li>Inform residents about service policies.</li>
                            <li>Pay invoices punctually according to the agreed monthly rate of <strong>${formatDisplayCurrency(contractData.monthly_rate)}</strong>.</li>
                        </ul>
                    </p>

                    <p><strong>SIXTH – PRICE AND PAYMENT TERMS:</strong> The agreed rate is <strong>${formatDisplayCurrency(contractData.monthly_rate)}</strong> per month. Billing occurs on the [Day] of each month. Payments are due within [Days] after the invoice date. Late payments may incur a monthly penalty fee.</p>

                    <p><strong>SEVENTH – LIABILITY AND INSURANCE:</strong> The SERVICE PROVIDER shall be liable for direct damages caused by proven negligence. The SERVICE PROVIDER maintains general liability insurance, vehicle insurance, and workers' compensation as required by law.</p>

                    <p><strong>EIGHTH – RESIDENT GRIEVANCE PROCEDURE:</strong> Residents may report issues directly to the CLIENT or via the Service Provider's reporting channel. SERVICE PROVIDER shall resolve incidents within a maximum period of [Hours] hours.</p>

                    <p><strong>NINTH – EARLY TERMINATION:</strong> Either party may terminate the contract with written notice for breach of contract or non-payment.</p>

                    <div class="pt-8 border-t border-gray-800 text-xs text-gray-500 italic">
                        By signing this digital document, both parties agree to the terms and conditions outlined above. This electronic acceptance constitutes a legally binding agreement for the property at <strong>${contractData.property}</strong>.
                    </div>
                </div>
            `;
            ui.termsContent.innerHTML = termsTemplate;
        }

        // Run init
        init();
    </script>
</body>
</html>